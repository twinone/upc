<html>
<body>
<style>

table {
    border-collapse: collapse;
    width: 1000px;
    border: 2px solid #4CAF50;
    margin: 0 auto;
}

th, td {
    width: 400px;
    margin: auto;
    text-align: left;
    padding: 8px;
    border-left: 1px solid #4CAF50;
}


td span.name {
    font-weight: bold;
    margin-bottom: 1em;
    display: inline-block;
}

td .address {
    font-style: italic;
    font-size: .9em;
}

td span.proxdate {
    font-size: .8em;
    color: #888888;
}

tr:nth-child(even){background-color: #f2f2f2}

th {
    background-color: #4CAF50;
    color: white;
    text-align: center;
}


.tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black;
}

.tooltip .inner {
    background-color: #4CAF50;
    text-align: center;
    border-radius: 6px;
    padding: 5px 5px;
    position: absolute;
    z-index: 1;
    top: -5px;
    left: 110%;
}

.tooltip .inner::after {
    content: "";
    position: absolute;
    top: 50%;
    right: 100%;
    margin-top: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: transparent black transparent transparent;
}


</style>

<!-- [[CONTENT]] -->

<script>

function query(q) {
  return 'https://www.google.com/maps/embed/v1/place?key=AIzaSyBNIp87_yb-HNAdRnd-XTH5kWH0Xz0eDss&q=' + q
}
function onClick(ev) {
  ev.preventDefault()
  var el = ev.target
  if (el.tooltip) {
    setTimeout(function() {el.tooltip.focus()} , 0)
    el.tooltip.style.visibility = 'visible'
    return
  }

  console.log("hover over", el)
  var iframe = document.createElement('iframe')
  iframe.setAttribute('class', 'inner')
  // AIzaSyBNIp87_yb-HNAdRnd-XTH5kWH0Xz0eDss
  iframe.setAttribute('width', 480)
  iframe.setAttribute('height', 320)
  iframe.setAttribute('frameborder', "0")
  iframe.setAttribute('style', "border:0;")
  iframe.setAttribute('src', query(el.textContent + ", Barcelona"))
  iframe.addEventListener('blur', function() {
    console.log("blurring")
    iframe.style.visibility = 'hidden'
  })
  // delay until appended
  setTimeout(function() {iframe.focus()} , 0)
  el.appendChild(iframe)
  el.tooltip = iframe
}
function onLoaded() {
  document.querySelectorAll('.address').forEach(function(el) {
    console.log("el:", el)
    el.addEventListener('click', onClick)
  })
}
document.addEventListener("DOMContentLoaded", onLoaded)

</script>
</body>
</html>
